---
import FeaturedLinkCard from "./FeaturedLinkCard.astro";
import featuredLinksData from "../content/featured-links.json";

// Get the dominant item (first one marked as dominant)
const dominantItem = featuredLinksData.find((link) => link.isDominant);
const otherItems = featuredLinksData.filter((link) => !link.isDominant);
---

<section class="featured-links mt-16 sm:mt-20 md:mt-24 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-8 md:mb-12">
      <h2
        class="text-2xl sm:text-3xl md:text-4xl font-extrabold text-black mb-3 sm:mb-4">
        Featured Work
      </h2>
      <p
        class="text-sm sm:text-base leading-6 text-gray-700 font-light max-w-2xl mx-auto px-4">
        A curated selection of my projects, research, and thought leadership
        across entrepreneurship, technology, and creative endeavors.
      </p>
    </div>

    <!-- Main Grid Container -->
    <div class="px-4 sm:px-6 py-6 md:px-12 md:py-12">
      <!-- Desktop Layout: Proper Grid -->
      <div
        class="hidden md:grid md:grid-cols-2 lg:grid-cols-3 gap-6 items-stretch">
        <!-- Dominant Feature (spans 2 columns on large screens) -->
        {
          dominantItem && (
            <div class="md:col-span-2 lg:col-span-2 flex">
              <FeaturedLinkCard link={dominantItem} />
            </div>
          )
        }

        <!-- Other Items in a 2x2 grid below the dominant card -->
        {
          otherItems.slice(0, 4).map((link) => (
            <div class="md:col-span-1 lg:col-span-1 flex">
              <FeaturedLinkCard link={link} />
            </div>
          ))
        }
      </div>

      <!-- Mobile Layout: Improved Stacked Cards -->
      <div class="md:hidden space-y-4">
        {featuredLinksData.map((link) => <FeaturedLinkCard link={link} />)}
      </div>
    </div>
  </div>
</section>
