---
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import PageHeading from "../components/PageHeading.astro";
import FilmCard from "../components/FilmCard.astro";
import WebPageSchema from "../components/WebPageSchema.astro";
import { getCollection } from "astro:content";

const siteUrl = "https://prannaykedia.com";
const filmMakingUrl = new URL(Astro.url.pathname, siteUrl).href;

const films = await getCollection("films");

// Prepare videos for schema
const videos = films.map((film) => ({
  url: film.data.youtubeLink,
  name: film.data.title,
  description: film.data.about,
}));
---

<Layout title="Film Making | Prannay Kedia">
  <WebPageSchema
    title="Film Making | Prannay Kedia"
    description="Select short films I've been a part of. I contributed as the director and cinematographer."
    url={filmMakingUrl}
    videos={videos}
  />

  <PageHeading>
    <h1>Film Making</h1>
  </PageHeading>

  <main class="flex flex-col items-center gap-12 lg:px-24 md:px-24 mt-20">
    {
      films.map((film) => (
        <FilmCard
          youtubeLink={film.data.youtubeLink}
          title={film.data.title}
          about={film.data.about}
        />
      ))
    }
  </main>
</Layout>
