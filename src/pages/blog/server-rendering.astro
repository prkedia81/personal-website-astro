<!-- ---
import Layout from "../../layouts/Layout.astro";
import { ghostClient } from "../../services/ghost";
import type { PostsOrPages, PostOrPage, Tag } from "@tryghost/content-api";
import Newsletter from "../../components/Newsletter";
import type { MetaProps } from "../../components/MetaTags.astro";

interface Props {
  post: PostOrPage;
  meta: MetaProps;
}

const posts = (await ghostClient.posts
  .browse({
    limit: "all",
    include: ["authors", "tags"],
  })
  .catch((err) => {
    console.error(err);
  })) as PostsOrPages;

const { slug } = Astro.params;
const post = posts.find((post) => post.slug === slug);
if (!post) return Astro.redirect("/404");
const meta = {
  title: post.meta_title || post.title,
  description: post.meta_description || post.custom_excerpt || post.excerpt,
  image: post.feature_image,
  url: "https://prannaykedia.com/blog/" + post.slug,
} as MetaProps;
---

<Layout title={post.title} metaData={meta}>
  <section
    id="blog-header"
    class="flex-col flex md:flex-row items-center lg:px-24 md:px-24 px-6 mt-12 gap-12 justify-around">
    <div
      class="order-2 md:order-1 md:max-w-2xl flex flex-col gap-3 text-center md:text-start md:gap-6">
      <h1 class="text-2xl md:text-4xl font-bold">
        {post.title}
      </h1>
      <p class="text-gray-500 font-light text-xs md:text-sm">
        {
          new Date(post.published_at ?? "1.1.2023").toLocaleDateString(
            undefined,
            {
              year: "numeric",
              month: "long",
              day: "2-digit",
            }
          )
        }
      </p>
    </div>
    <img
      src={post.feature_image}
      class="md:w-1/2 aspect-video md:order-2 rounded-xl"
      alt=""
    />
  </section>

  <section id="blog-content">
    <div
      class="mt-6 md:mt-16 lg:px-44 md:px-44 px-6 leading-7 font-normal text-base flex flex-col gap-4">
      <Fragment set:html={post.html} />
    </div>
  </section>

  <Newsletter client:visible />

  <script src="../../assets/blogParser.js"></script>
</Layout> -->
